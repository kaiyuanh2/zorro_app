// window.onresize = function() {
//     Plotly.Plots.resize(document.getElementById('zonotopeGraph'));
// };

const f1Dropdown3d = document.getElementById('feature13d');
const f2Dropdown3d = document.getElementById('feature23d');
const f3Dropdown3d = document.getElementById('feature33d');
const zonotopeG3d = document.getElementById('zonotopeG3D');

function drawZonotope3D() {
    if (!f1Dropdown3d.value || !f2Dropdown3d.value || !f3Dropdown3d.value) {
        zonotopeG3d.innerHTML = '<p class="card-text">Select 3 different features (including offset) to show zonotope.</p>'
    } else if ((f1Dropdown3d.value === f2Dropdown3d.value) || (f1Dropdown3d.value === f3Dropdown3d.value) || (f2Dropdown3d.value === f3Dropdown3d.value)) {
        zonotopeG3d.innerHTML = '<p class="card-text">At least 2 features are the same. Check the dropdowns and try again.</p>'
    } else {
        // canvas = document.getElementById("canvas");
	    // canvas.getContext('2d', { willReadFrequently: true });
        zonotopeG3d.innerHTML = '<div id="zonotopeGraph3D"></div>'
        var trace1_3d = { x: [13194.686978435597, 13199.060339310288, 13200.443993784776, 13234.42594509397, 13239.20918826433, 13242.168761365769,
                13241.162599618814, 13233.189611397784, 13203.256246107912, 13232.449028256016, 13250.760382673137, 13238.79788729299, 13253.138758392668,
                13189.038743739335, 13187.622432869457, 13201.964621617064, 13245.535693666252, 13233.097581414144, 13239.264479058993, 13198.362257947125,
                13245.003367323958, 13191.304765597642, 13192.880684224592, 13245.695771885401, 13203.03287566385, 13195.83793786423, 13247.657184670135,
                13243.051128749588, 13207.721636966244, 13232.351262472976, 13194.71165669918, 13235.842255963847, 13239.368796021403, 13209.452107564864,
                13194.969030239294, 13185.547750248463, 13200.946132117462, 13242.191115000822, 13247.748041873661, 13207.461527333204, 13236.00186372092,
                13241.7588790701, 13253.258610983508, 13187.912462574286, 13239.684196449105, 13250.774046066845, 13240.810477614154, 13242.631411359476,
                13241.476827266402, 13199.002312192026, 13251.900327231893, 13192.035752545204, 13245.125811370583, 13194.809422482222, 13194.117017920778,
                13195.635379891542, 13200.603601541849, 13200.008740766234, 13230.285329091008, 13235.773485568121, 13196.761661056591, 13191.127089754036,
                13206.335246168155, 13195.533328790656, 13186.96406111834, 13236.556543698267, 13246.932105581587, 13237.848168189115, 13198.650190187365,
                13230.360682241315, 13207.363761550163, 13186.554178822671, 13246.70878321419, 13235.99525354387, 13189.052407133042, 13201.014902513189,
                13188.642524837373, 13192.155605136044, 13189.976401917816, 13236.77991414233, 13194.45154706614, 13205.38684471221, 13244.35481416583,
                13194.277096139927, 13196.247616525076, 13244.843759566886, 13242.288880783863, 13197.523909022317, 13249.836387888363, 13199.598591643311,
                13193.27066756572, 13229.2789005168, 13198.05391073608, 13198.133879794326, 13186.674031413511, 13248.265982662031, 13240.214198162868,
                13195.45797564035, 13203.81753626231, 13187.636096263164, 13192.72107646752, 13239.804049039945, 13196.786339320175, 13201.135021931283,
                13251.170264968807, 13201.729190247608, 13186.496151704408, 13238.083599558571, 13252.848728687839, 13253.31663810177, 13245.101133106999,
                13252.190356936722, 13243.026450486004, 13203.81092608526, 13247.09171333866, 13190.000808588988, 13206.851556561194, 13244.119382796374,
                13191.029323970995, 13252.176693543015, 13248.783465835184, 13209.527460715171, 13192.064747932518, 13238.677767874897, 13193.10400659199,
                13232.091152839936, 13200.128593357074, 13243.97485194195, 13236.89976673317, 13233.477543638024, 13197.621674805358, 13197.181378446703,
                13238.866657688717, 13248.685700052143, 13195.693407009805, 13203.970533842332, 13240.752450495891, 13246.54212224046, 13247.777037260976,
                13254.265039557717, 13191.546807144148, 13245.361242740039, 13241.450531859055, 13244.177409914637, 13244.279461015523, 13204.039304238058,
                13248.508024208537, 13200.548310747186, 13197.64402844041, 13243.565173281104, 13241.678910011853, 13249.811981217192, 13202.91302307301,
                13210.53388928938, 13206.623178408396, 13206.715208392035, 13198.335962539777, 13232.961233244985],
            y: [3455.3314164025287, 3461.980046409296, 3503.917747906089, 3427.1962640241572, 3463.982569862096, 3457.5653037472794, 3484.9378801215444,
                3378.7190825573916, 3504.0399617612447, 3483.1549971608574, 3453.232643454201, 3430.0799612823275, 3473.918530283313, 3470.0818687626215,
                3439.678998812764, 3464.051464932768, 3463.9487396353607, 3376.7698778890754, 3455.4938852238074, 3380.182467507767, 3404.6463119506407,
                3439.900947440853, 3391.545979829243, 3449.119318910709, 3512.150653689553, 3404.0823862300176, 3485.2820426047892, 3385.446680928718,
                3512.6377964363282, 3378.831881148686, 3380.1730522439057, 3457.599133974015, 3385.2247323006286, 3420.1798339112265, 3405.7383306946094,
                3391.3146159372927, 3378.190017348854, 3404.524098095485, 3485.47556803558, 3510.3105990580316, 3378.8412964125473, 3427.4276279161077,
                3497.562670150739, 3446.1725347765096, 3379.0632450406365, 3419.060611444096, 3402.9725790267485, 3461.8773211118887, 3477.020713624027,
                3486.169901179969, 3442.969945430208, 3380.2162977345024, 3433.811063804189, 3484.496168256077, 3440.0231612960088, 3479.786465291888,
                3425.1599103446215, 3486.435095298655, 3376.6476640339197, 3376.7266323984786, 3503.695799278, 3484.274219627988, 3486.4012650719196,
                3470.4260312458664, 3421.7174858871504, 3385.102518445473, 3497.5965003774745, 3425.09101527395, 3404.2046000851733, 3468.962646295491,
                3405.9874830458602, 3391.5798100559787, 3460.82699371543, 3488.384225945503, 3435.9098367525166, 3459.06251892439, 3405.772160921345,
                3403.8604376019284, 3389.474561305771, 3376.9918265171646, 3377.845854865609, 3461.9462161825604, 3511.0314312224227, 3425.193740571357,
                3397.9294157173244, 3483.4041495121082, 3508.8472141076563, 3380.2952660990613, 3499.6679189009465, 3428.6596489745325, 3424.928546452671,
                3376.3824699152337, 3461.71485229061, 3378.067803493698, 3415.2239499234047, 3481.2989007619008, 3460.482831232185, 3378.111048984295,
                3400.7582542612145, 3405.506966802659, 3470.3038173907107, 3402.7073849080625, 3428.537435119377, 3510.344429284767, 3483.3703192853727,
                3386.565903395848, 3415.769664826652, 3502.5765768108695, 3467.4249943195673, 3473.3728153800657, 3508.969427962812, 3449.4634813939538,
                3460.605045087341, 3510.3011837941704, 3418.838662816007, 3460.364885641876, 3512.5380616633947, 3433.545869685503, 3379.9511036158165,
                3483.6355134040587, 3509.191376590901, 3512.494816172798, 3403.6669121711375, 3378.7980509219506, 3428.3154864912876, 3376.5046837703894,
                3510.079235166081, 3485.0600939767, 3400.6359663845906, 3402.741215134798, 3484.6183821112327, 3427.265159094829, 3510.952462857864,
                3404.86826057873, 3455.5966105212146, 3431.543346232703, 3427.1624337974217, 3464.2139337540466, 3508.9261824722153, 3497.827864269425,
                3407.843579444817, 3511.2966253411087, 3508.960012698951, 3409.3560149148298, 3418.7164489608513, 3512.415847808239, 3449.2415327658646,
                3433.6485949829103, 3431.5771764594383, 3491.213064489393, 3511.0746767130195, 3428.777594564842, 3488.506513822127, 3512.760010291484,
                3510.423397649326, 3512.3726023176423, 3412.1217665826907, 3376.604418543323],
            z: [1698.3260900450737, 1637.14850243707, 1748.273122536944, 2037.6850877302354, 1957.5477561831344, 1968.190936707379, 1605.1172432698977, 1923.5809212467989,
                1761.895849444751, 1882.6800568398558, 1819.3886817101306, 1633.332805727105, 1684.080843252435, 1925.5619477418381, 1958.0808620488697, 1610.501457232711,
                1920.5725194673096, 1963.8506933589651, 1994.837981911738, 1922.9402955479704, 1769.4416492182604, 1982.048025066479, 1881.5665854908498, 1642.1876014771942,
                1650.040497074906, 2019.1183832737756, 1642.7071331953143, 1913.552393932146, 1660.4484897245811, 2011.7052182559746, 1997.441865649339, 2005.1661734232039,
                1889.5852309145366, 1674.0658900853973, 1800.4541789646223, 1932.1009925746089, 2000.7364010456804, 1755.8189223104532, 1810.7571292824991, 1626.153135195506,
                1937.203648154606, 1987.1506806464763, 1719.316531244806, 1903.8854301174015, 1961.1708111722155, 1712.2964057096424, 1982.8473287966522, 1947.2195646716686,
                1885.0225917269277, 1655.0110246548284, 1733.972923334079, 1959.9155322637953, 1939.5322634064069, 1868.4167042332201, 1995.6707519742863, 1702.6294418948978,
                1680.310597268346, 1641.451854286894, 1950.227966451158, 2001.3770267445088, 1724.3059595193345, 1844.4495412156107, 1604.4766175710693, 1963.1518376672548,
                1899.5820782675773, 1875.9625040067294, 1756.2917679606308, 2027.3568962187696, 2032.7411101815828, 1963.7924633660832, 1755.1782966116248, 1918.5418222066746,
                1638.4037813454902, 1843.648881669807, 1818.4696717413499, 2004.5255477243754, 1837.4294156804472, 1995.1512202561662, 1908.2136306952088, 1987.8178563765746,
                1963.1465111202638, 1600.1732657212451, 1688.271012699151, 1717.285833984171, 1833.9481682507803, 1837.4041744868582, 1626.7937608943344, 2011.0645925571462,
                1729.6447227562717, 2037.044462031407, 1730.8450043521052, 1963.7871368190922, 1650.7076728050042, 1987.1136741378732, 1953.7775101990455, 1827.0759829753924,
                1600.8138914200736, 1949.5873407523295, 1794.2094717816735, 1850.9885860483814, 1949.5291107594476, 1996.4064991645864, 2023.4217351235998, 1663.1283719113308,
                1800.4289377710334, 1875.321878307901, 1936.404344424433, 1762.5364751435795, 1738.2762751839032, 1701.4540090270475, 1640.4164878021415, 1679.7774914026108, 
                614.4366183278808, 1700.6547052968745, 1688.329242692033, 1822.773023591174, 1650.1040536147789, 1953.091433774341, 1973.4747026317295, 1786.869767403099,
                1664.383650819751, 1687.6303870003226, 1827.1012241689814, 1974.7299815401498, 1999.4545721059903, 1977.4098637268994, 1676.687542279265, 1618.739970177705,
                2023.0535443689455, 2033.3817358804113, 1882.0394311410273, 1690.6387887798119, 1637.1219524058001, 1793.4088122358698, 1684.7669196771394, 1632.6921800282767,
                2000.7098510144106, 1907.0133490993753, 1677.9428211876852, 1705.7573608768716, 1810.782370476088, 1674.7118423312168, 1714.91805790351, 1935.2289115565827,
                1674.7065157842258, 1636.4813267069717, 1655.8103283850014, 1643.0203715397424, 1669.6674167441015, 1803.9101852007002, 1650.7446793136073, 1815.0853298603065,
                1614.804809082535, 1674.0712166323883, 1714.2774322046816, 1674.0076600925154, 1752.8357617245529, 1987.7542998367016],
            i: [96, 96, 89, 89, 89, 89, 61, 61, 86, 86, 8, 8, 118, 118, 87, 87, 87, 87, 84, 84, 78, 78, 64, 64, 64, 64, 90, 90, 15, 15, 15, 15, 109, 109, 109, 109, 124, 124, 94, 94, 94, 94, 106, 106, 106, 106, 106, 106, 21, 21, 21, 21, 31, 31, 53, 53, 67, 67, 67, 67, 70, 70, 133, 133, 65, 65, 144, 144, 51, 51, 55, 55, 55, 55, 2, 2, 2, 2, 2, 2, 154, 154, 152, 152, 152, 152, 152, 152, 156, 156, 156, 156, 156, 156, 156, 156, 42, 42, 12, 12, 54, 54, 63, 63, 63, 63, 63, 63, 69, 69, 69, 69, 142, 142, 142, 142, 142, 142, 11, 11, 11, 11, 23, 23, 71, 71, 71, 71, 71, 71, 122, 122, 122, 122, 83, 83, 83, 83, 83, 83, 103, 103, 49, 49, 49, 49, 112, 112, 112, 112, 73, 73, 48, 48, 48, 48, 48, 48, 4, 4, 88, 88, 153, 153, 132, 132, 138, 138, 32, 32, 32, 32, 32, 32, 114, 114, 114, 114, 114, 114, 114, 114, 93, 93, 93, 93, 59, 59, 59, 59, 59, 59, 131, 131, 131, 131, 24, 24, 92, 92, 92, 92, 92, 92, 72, 72, 72, 72, 72, 72, 38, 38, 38, 38, 38, 38, 120, 120, 120, 120, 120, 120, 58, 58, 10, 10, 10, 10, 136, 136, 136, 136, 137, 137, 143, 143, 143, 143, 125, 125, 157, 157, 157, 157, 157, 157, 79, 79, 79, 79, 79, 79, 140, 140, 140, 140, 140, 140, 155, 155, 155, 155, 47, 47, 47, 47, 116, 116, 116, 116, 110, 110, 110, 110, 110, 110, 110, 110, 7, 7, 7, 7, 7, 7, 7, 7, 117, 117, 46, 46, 46, 46, 46, 46, 46, 46, 28, 28, 28, 28, 28, 28, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16],
            j: [62, 62, 25, 25, 129, 3, 115, 43, 62, 62, 9, 9, 25, 25, 129, 29, 25, 25, 22, 105, 22, 97, 99, 99, 115, 115, 99, 0, 147, 135, 147, 1, 108, 108, 50, 111, 25, 25, 118, 118, 124, 124, 64, 64, 94, 94, 43, 14, 124, 124, 14, 100, 89, 89, 61, 100, 31, 31, 3, 128, 98, 98, 50, 50, 70, 70, 70, 70, 80, 80, 61, 61, 115, 0, 126, 126, 53, 61, 8, 53, 2, 2, 15, 57, 62, 145, 62, 15, 56, 56, 84, 34, 98, 135, 84, 98, 104, 119, 109, 109, 89, 21, 53, 53, 89, 54, 21, 54, 9, 63, 31, 63, 149, 149, 8, 154, 82, 154, 96, 135, 144, 135, 11, 11, 99, 76, 118, 51, 78, 51, 78, 34, 71, 71, 90, 76, 1, 134, 90, 134, 152, 152, 103, 103, 55, 126, 23, 23, 96, 127, 9, 69, 85, 149, 69, 73, 149, 73, 48, 48, 142, 142, 141, 82, 86, 145, 88, 88, 20, 133, 65, 20, 44, 40, 133, 20, 144, 20, 111, 146, 23, 23, 118, 80, 87, 36, 87, 36, 29, 128, 101, 101, 147, 56, 147, 83, 103, 103, 134, 134, 57, 49, 55, 49, 12, 12, 112, 146, 112, 127, 95, 95, 42, 88, 85, 88, 42, 138, 12, 12, 141, 138, 80, 80, 108, 50, 108, 119, 67, 5, 67, 101, 10, 10, 133, 133, 10, 10, 58, 58, 93, 80, 125, 125, 93, 59, 40, 40, 125, 125, 59, 44, 122, 122, 56, 131, 83, 131, 154, 154, 126, 24, 31, 4, 4, 95, 132, 150, 153, 150, 132, 150, 120, 150, 86, 127, 127, 120, 105, 65, 97, 58, 32, 32, 58, 40, 136, 52, 101, 44, 44, 143, 136, 136, 143, 52, 116, 116, 24, 155, 153, 155, 136, 117, 137, 117, 104, 137, 95, 47, 5, 47],
            k: [6, 81, 68, 102, 68, 129, 43, 13, 6, 39, 107, 130, 30, 77, 68, 129, 68, 30, 19, 19, 19, 19, 74, 35, 43, 74, 74, 74, 135, 81, 148, 148, 50, 139, 45, 45, 102, 77, 77, 35, 77, 14, 35, 43, 35, 14, 13, 13, 102, 14, 13, 13, 3, 75, 13, 13, 3, 18, 129, 129, 105, 33, 45, 151, 105, 37, 33, 37, 118, 97, 115, 60, 74, 74, 113, 60, 61, 60, 130, 130, 113, 8, 1, 1, 39, 39, 81, 81, 34, 135, 22, 22, 33, 33, 105, 105, 119, 139, 139, 111, 102, 102, 100, 130, 75, 89, 100, 21, 130, 130, 75, 75, 107, 66, 107, 8, 121, 121, 81, 81, 33, 33, 96, 144, 35, 99, 35, 118, 97, 97, 22, 22, 76, 78, 99, 99, 148, 1, 0, 0, 57, 145, 57, 126, 60, 60, 96, 146, 6, 6, 107, 9, 66, 66, 31, 69, 107, 107, 85, 31, 66, 82, 82, 121, 39, 39, 82, 42, 133, 27, 37, 37, 27, 44, 45, 133, 37, 37, 45, 111, 144, 146, 30, 118, 30, 87, 29, 87, 129, 129, 128, 123, 135, 135, 148, 148, 145, 126, 0, 1, 1, 57, 0, 55, 111, 26, 146, 111, 127, 26, 104, 85, 104, 42, 66, 66, 139, 42, 139, 26, 82, 82, 97, 91, 50, 151, 139, 139, 18, 18, 128, 128, 119, 52, 151, 27, 151, 52, 91, 17, 80, 91, 91, 59, 36, 36, 44, 17, 17, 59, 123, 123, 34, 76, 34, 56, 76, 83, 113, 121, 113, 126, 18, 31, 85, 85, 145, 132, 141, 141, 86, 132, 141, 141, 6, 6, 26, 26, 19, 105, 19, 97, 65, 40, 17, 17, 41, 41, 123, 123, 27, 27, 101, 41, 52, 41, 145, 153, 145, 24, 121, 121, 5, 136, 52, 52, 119, 119, 104, 95, 18, 18],
            name: 'Zonotope', opacity: 0.3, type: 'mesh3d', color: 'blue' };
        
        var trace2_3d = {
                x: [13211.466615457586],
                y: [3441.065865402959],
                z: [1831.9276345586377],
                name: 'Ground Truth',
                mode: 'markers',
                type: 'scatter3d',
                marker: { size: 5, color: 'orange' }
        };
        var z3ddata = [trace1_3d, trace2_3d];
        var z3dlayout = {
            title: '3D Zonotope',
            showlegend: true,
            scene: {xaxis: { title: 'Feature 1', tickformat: '.4f' }, yaxis: { title: 'Feature 2', tickformat: '.4f' }, zaxis: { title: 'Feature 3', tickformat: '.4f' }}
         };
        Plotly.newPlot('zonotopeGraph3D', z3ddata, z3dlayout);
    }
}

function loadInstructions3D() {
    zonotopeG3d.innerHTML = '<p class="card-text">Select 3 different features (including offset) to show zonotope.</p>'
}

f1Dropdown3d.addEventListener('change', drawZonotope3D);
f2Dropdown3d.addEventListener('change', drawZonotope3D);
f3Dropdown3d.addEventListener('change', drawZonotope3D);
document.addEventListener('DOMContentLoaded', loadInstructions3D);